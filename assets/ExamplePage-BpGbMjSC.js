var Y=Object.defineProperty;var R=Object.getOwnPropertySymbols;var j=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable;var T=(n,i,a)=>i in n?Y(n,i,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[i]=a,$=(n,i)=>{for(var a in i||(i={}))j.call(i,a)&&T(n,a,i[a]);if(R)for(var a of R(i))H.call(i,a)&&T(n,a,i[a]);return n};var b=(n,i,a)=>new Promise((f,p)=>{var y=m=>{try{d(a.next(m))}catch(c){p(c)}},g=m=>{try{d(a.throw(m))}catch(c){p(c)}},d=m=>m.done?f(m.value):Promise.resolve(m.value).then(y,g);d((a=a.apply(n,i)).next())});import{_ as O}from"./ContentWrap.vue_vue_type_script_setup_true_lang-l6t57F60.js";import{_ as F}from"./Search.vue_vue_type_script_setup_true_lang-RDMgefFn.js";import{i as u,c as U}from"./index-i99jxE2p.js";/* empty css               */import{_ as q}from"./Table.vue_vue_type_script_lang-6_m45yZu.js";import{g as J,d as W}from"./index-Va6GCmmq.js";import{u as G}from"./useTable-8HzS6AQO.js";import{l as K,aB as Q,a as S,J as X,O as s,P as Z,u as t,m as ee,S as te,R as P,q as ae,V as z,W as A,B,y as oe}from"./vue-chunks-zxmGq976.js";import{u as le}from"./useEventBus-xUD6fuCX.js";import{u as ie}from"./useCrudSchemas-Wb0jYVCT.js";import{y as ne}from"./element-plus--p0OFoYR.js";/* empty css                *//* empty css                  */import"./Form-6CSNlcUY.js";/* empty css               *//* empty css                    */import"./el-radio-button-rO44T3ZJ.js";/* empty css                        *//* empty css                      *//* empty css                   *//* empty css                *//* empty css                    */import"./InputPassword-mbXzEzUd.js";import"./style.css_vue_type_style_index_0_src_true_lang-mgfL5zCA.js";import"./wang-editor-Ei5P05uq.js";import"./JsonEditor.vue_vue_type_script_setup_true_lang-gku-B2at.js";import"./IconPicker-h_bHnmwh.js";import"./useForm-qScLqIVZ.js";import"./useIcon-6JuTV7mk.js";/* empty css                        *//* empty css                         *//* empty css                  */import"./index-ckVPvV2P.js";import"./tree-sBP3NezW.js";const re={class:"mb-10px"};function w(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!oe(n)}const Oe=K({name:"ExamplePage",__name:"ExamplePage",setup(n){const{push:i}=Q(),a=S([]),f=S({}),p=e=>{f.value=e,_()},{tableRegister:y,tableState:g,tableMethods:d}=G({fetchDataApi:()=>b(this,null,function*(){const{currentPage:e,pageSize:o}=g,r=yield J($({pageIndex:t(e),pageSize:t(o)},t(f)));return{list:r.data.list,total:r.data.total}}),fetchDelApi:()=>b(this,null,function*(){return!!(yield W(t(a)))})}),{loading:m,dataList:c,total:E,currentPage:h,pageSize:D}=g,{getList:_,getElTableExpose:I,delList:N}=d;_(),le({name:"getList",callback:e=>{e==="add"&&(h.value=1),_()}});const{t:l}=U(),V=X([{field:"selection",search:{hidden:!0},form:{hidden:!0},detail:{hidden:!0},table:{type:"selection"}},{field:"index",label:l("tableDemo.index"),type:"index",search:{hidden:!0},form:{hidden:!0},detail:{hidden:!0}},{field:"title",label:l("tableDemo.title"),search:{component:"Input"},form:{component:"Input",colProps:{span:24}},detail:{span:24}},{field:"author",label:l("tableDemo.author"),search:{hidden:!0}},{field:"display_time",label:l("tableDemo.displayTime"),search:{hidden:!0},form:{component:"DatePicker",componentProps:{type:"datetime",valueFormat:"YYYY-MM-DD HH:mm:ss"}}},{field:"importance",label:l("tableDemo.importance"),search:{hidden:!0},form:{component:"Select",componentProps:{style:{width:"100%"},options:[{label:"重要",value:3},{label:"良好",value:2},{label:"一般",value:1}]}},detail:{slots:{default:e=>s(ne,{type:e.importance===1?"success":e.importance===2?"warning":"danger"},{default:()=>[e.importance===1?l("tableDemo.important"):e.importance===2?l("tableDemo.good"):l("tableDemo.commonly")]})}}},{field:"pageviews",label:l("tableDemo.pageviews"),search:{hidden:!0},form:{component:"InputNumber",value:0}},{field:"content",label:l("exampleDemo.content"),search:{hidden:!0},table:{show:!1},form:{component:"Editor",colProps:{span:24}},detail:{span:24,slots:{default:e=>s("div",{innerHTML:e.content},null)}}},{field:"action",width:"260px",label:l("tableDemo.action"),search:{hidden:!0},form:{hidden:!0},detail:{hidden:!0},table:{slots:{default:e=>{let o,r,v;return s(Z,null,[s(u,{type:"primary",onClick:()=>L(e.row,"edit")},w(o=l("exampleDemo.edit"))?o:{default:()=>[o]}),s(u,{type:"success",onClick:()=>L(e.row,"detail")},w(r=l("exampleDemo.detail"))?r:{default:()=>[r]}),s(u,{type:"danger",onClick:()=>C(e.row)},w(v=l("exampleDemo.del"))?v:{default:()=>[v]})])}}}}]),{allSchemas:k}=ie(V),M=()=>{i("/example/example-add")},x=S(!1),C=e=>b(this,null,function*(){const o=yield I();a.value=e?[e.id]:(o==null?void 0:o.getSelectionRows().map(r=>r.id))||[],x.value=!0,yield N(t(a).length).finally(()=>{x.value=!1})}),L=(e,o)=>{i(`/example/example-${o}?id=${e.id}`)};return(e,o)=>(ee(),te(t(O),null,{default:P(()=>[s(t(F),{schema:t(k).searchSchema,onSearch:p,onReset:p},null,8,["schema"]),ae("div",re,[s(t(u),{type:"primary",onClick:M},{default:P(()=>[z(A(t(l)("exampleDemo.add")),1)]),_:1}),s(t(u),{loading:x.value,type:"danger",onClick:o[0]||(o[0]=r=>C(null))},{default:P(()=>[z(A(t(l)("exampleDemo.del")),1)]),_:1},8,["loading"])]),s(t(q),{pageSize:t(D),"onUpdate:pageSize":o[1]||(o[1]=r=>B(D)?D.value=r:null),currentPage:t(h),"onUpdate:currentPage":o[2]||(o[2]=r=>B(h)?h.value=r:null),columns:t(k).tableColumns,data:t(c),loading:t(m),pagination:{total:t(E)},onRegister:t(y)},null,8,["pageSize","currentPage","columns","data","loading","pagination","onRegister"])]),_:1}))}});export{Oe as default};
